<html><head><title>Building an MPI program with Managed Build</title></head><body><h1>Building an MPI program with Managed Build</h1><p>Topics include:<ul><li><a href="#create">Creating an MPI project </a>(same as for C but worth describing)<li><a href="#include">include paths</a><li><a href="#mpicc">specifying the mpicc toolchain</a><li><a href="#launch">launching an MPI program </a> locally using 'External  Tools...' (by specifying the mpirun command)?</ul><h2 id="create">Create an MPI Project</h2><ol>  <li>To create a new MPI project in C using the managed build facility,    Select File -> New -> Project ...  The New Project dialog opens.</li>  <li>    Select C -> Managed Make C Project. </li></ol><p><img src="images/newProject.gif"></p><ol start=3>  <li>Click Next. </li>  <li>Type the name of your project, e.g. MyCProject<br>  </li></ol><p><img src="images/newProject2.gif">  </p><ol start=5>  <li> Click Finish.    <ul>      <li>A dialog prompts you to switch to the C/C++ Perspective. </li>      <li>Hit OK.        The C/C++ Perspective appears. </li>      <li>Your new project is shown in the C/C++ Projects view.</li>    </ul>  </li></ol><p><img src="images/cPersp.gif"><ol start=6>  <li>Now create a source file.  Click File -> New -> Source File. </li>  <li>Type a name for the source file, e.g. "test.c"  </li></ol><p><img src="images/newSourceFile.gif"><ol start=8>  <li>Click Finish.    <ul>      <li>A new editor appears, in which you can enter your program.</li>    </ul>  </li></ol><p><img src="images/newEditor.gif"></p><ol start=9>  <li>Since this is a managed build project, Eclipse creates a makefile  and tries to build with the new file.    <ul>      <li>As the file is empty,        you will see errors in the Problems view, and in the Console view. Ignore these. </li>    </ul>  </li></ol><p><img src="images/newFileErrors.gif">        </p><ol start=10>  <li>Enter a program in the editor.    (If you have the PTP MPI Tools installed, a sample program is available     in the PTP MPI tools help, available as:     <a href="../../org.eclipse.ptp.mpi.help/html/testMPI.c">testMPI.c</a>    <!--  TODO I don't think that relative URL will work in installed plug-in -->   </li>  <li>Save your program.  The program will be compiled automatically by    the managed build system.    <ul>      <li>You will probably see several errors.          The first error may be that an include file isn't found. </li>    </ul>  </li></ol><p><img src="images/errorInclude.gif">  </p><ul>  <ul>    <li> (If you hover the mouse cursor over the red "X"      you will see the reason for the error) </li>  </ul></ul><h2 id="include">Include Paths</h2><ol>  <li>In order to locate needed include files, bring up the Project Properties on this C/C++ project.  </li>  <li> To bring up the Project Properties dialog,    activate the context menu  on the Project, and select "Properties."<br>    <br>    <img src="images/projProps.gif"></li></ol><ol start=3>  <li> The project properties window is displayed for this C project.  </li>  <li>Select "C/C++ Build" on the left, and under "Configuration settings"     on the "Tool Settings" tab, select "Directories" under "GCC Compiler."    <ul>      <li>This lists the Include paths used to build the project, which are now        empty. </li>    </ul>  </li></ol><p><img src="images/propsBuild.gif">  </p><ol start=5>  <li>To add an include path, click the add button for Include Paths.  </li></ol><p><img src="images/includePathsAdd.gif"></p><ol start=6>  <li>Then enter or browse to find the location of the MPI includes, and    select "OK."  </li></ol><p><img src="images/includePathsAddDlg.gif"></p><ol start=7>  <li>Now you also need to add the path to the library: Under GCC Linker,    Libraries, select the add button for "Libraries (-l)"   </li></ol><p><img src="images/projPropsLnkLib.gif"><ol start=8>  <li>For the library value, enter 'mpi' and select 'OK'  </li></ol><p><img src="images/linkerDlg.gif"><ol start=9>  <li>Then select the add button for  "Library Search Path (-L)"     and enter the path to the lib directory.  Select 'OK' </li></ol><p><img src="images/libDlg.gif"><ol start=10>  <li>Now select "OK" in the project properties dialog to close this dialog.    Now your project should rebuild without errors relating to finding    the include files.</li></ol><h2 id="mpicc">Specifying the mpicc toolchain</h2><ol>  <li>Now specify the build/link command.  </li>  <li>Again in Project properties, C/C++ build page, Tool Settings tab,    click on "GCC C compiler"    and change the default "gcc" value to "mpicc"  (or whatever the build command is for your MPI environment). </li></ol><p><img src="images/projPropsMpicc.gif"></p><ol start=3>  <li>Then do the same for the "GCC C Linker."  </li></ol><p><img src="images/projPropsMpicc2.gif"><ol start=4>  <li>Now proceed to <a href="02pLaunchConfig.html">launch the parallel program.</a>  </li></ol><p><p><p><a href="#top">Back to Top</a> | <a href="toc.html">Back to Table of Contents</a></body></html>